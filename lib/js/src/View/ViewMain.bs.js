// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("bs-platform/lib/js/curry.js");
var React = require("react");
var ReactDom = require("react-dom");
var Belt_Option = require("bs-platform/lib/js/belt_Option.js");
var Caml_option = require("bs-platform/lib/js/caml_option.js");
var Json_decode = require("@glennsl/bs-json/lib/js/src/Json_decode.bs.js");
var View$Guacamole = require("../View.bs.js");
var Event$Guacamole = require("../Util/Event.bs.js");
var Panel$Guacamole = require("./Panel.bs.js");
var Vscode$Guacamole = require("../Vscode.bs.js");

var vscode = acquireVsCodeApi();

var onRequest = Event$Guacamole.make(/* () */0);

Vscode$Guacamole.Api.onMessage((function (stringifiedJSON) {
        var match = Json_decode.pair((function (param) {
                return Json_decode.optional(Json_decode.$$int, param);
              }), View$Guacamole.$$Request.decode, JSON.parse(stringifiedJSON));
        return Curry._1(onRequest.emit, /* tuple */[
                    match[0],
                    match[1]
                  ]);
      }));

var onResponse = Event$Guacamole.make(/* () */0);

Curry._1(onResponse.on, (function (response) {
        vscode.postMessage(View$Guacamole.$$Response.encode(response));
        return /* () */0;
      }));

Belt_Option.forEach(Caml_option.nullable_to_opt(document.getElementById("root")), (function (element) {
        ReactDom.render(React.createElement(Panel$Guacamole.make, {
                  editorType: /* VsCode */1,
                  onRequest: onRequest,
                  onResponse: onResponse
                }), element);
        return /* () */0;
      }));

exports.vscode = vscode;
exports.onRequest = onRequest;
exports.onResponse = onResponse;
/* vscode Not a pure module */
